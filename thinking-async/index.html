<!doctype html><html lang=en-US><head><meta charset=utf-8><meta content="ie=edge" http-equiv=x-ua-compatible><meta content="width=device-width,initial-scale=1,shrink-to-fit=no" name=viewport><link as=font crossorigin href=https://wendajiang.github.io/fonts/vendor/jost/jost-v4-latin-regular.woff2 rel=preload type=font/woff2><link as=font crossorigin href=https://wendajiang.github.io/fonts/vendor/jost/jost-v4-latin-700.woff2 rel=preload type=font/woff2><link href=https://wendajiang.github.io/main.css rel=stylesheet><meta content="index, follow" name=robots><meta content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1" name=googlebot><meta content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1" name=bingbot><title>thinking async | 「靡不有初，鲜克有终」</title><meta content="clutter thinking about async" name=description><link href=https://wendajiang.github.io/thinking-async/ rel=canonical><meta content="thinking async" property=og:title><meta content="clutter thinking about async" property=og:description><meta content=article property=og:type><meta content=https://wendajiang.github.io/thinking-async/ property=og:url><meta content=https://wendajiang.github.io/david.png property=og:image><meta content=2023-07-19T15:22:51 property=og:updated_time><meta content="thinking async" property=og:site_name><meta content=en_US property=og:locale><script type=application/ld+json>
    {
      "@context": "https://schema.org",
      "@type": "Article",
      "mainEntityOfPage": {
        "@type": "WebPage",
        "@id": "/thinking-async/"
      },
      "headline": "thinking async",
      "image": ,
      "datePublished": "2023-07-19T15:22:51",
      "dateModified": "2023-07-19T15:22:51",
      "author": {
        "@type": "Organization",
        "name": "thinking async"
      },
      "publisher": {
        "@type": "Organization",
        "name": "thinking async",
        
        "logo": {
          "@type": "ImageObject",
          "url": "/david.png"
        }
        
      },
      "description": "clutter thinking about async"
    }
    </script><script type=application/ld+json>
  {
    "@context": "http://schema.org",
    "@type": "BreadcrumbList",
    
      
      
        
        
        
        
        
        
        
        
        
        
        
          {
            "@type": "ListItem",
            "position":  1 ,
            "name": "Home",
            "item": "https://wendajiang.github.io/"
          },
          
          
          {
            "@type": "ListItem",
            "position":  2 ,
            "name": "Thinking Async",
            "item": "https://wendajiang.github.io/thinking-async/"
          },
        
      
    
  }
</script><meta content=#fff name=theme-color><link href=https://wendajiang.github.io/david.png rel=apple-touch-icon sizes=180x180><link href=https://wendajiang.github.io/david.png rel=icon sizes=32x32 type=image/png><link href=https://wendajiang.github.io/david.png rel=icon sizes=16x16 type=image/png><link crossorigin href=https://wendajiang.github.io/site.webmanifest rel=manifest><link href=https://wendajiang.github.io/rss.xml rel=alternate title=RSS type=application/rss+xml><link crossorigin href=https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.css integrity=sha384-zB1R0rpPzHqg7Kpt0Aljp8JPLqbXI3bhnPWROx27a9N0Ll6ZP/+DiW/UqRcLbRjq rel=stylesheet><script crossorigin defer integrity=sha384-y23I5Q6l+B6vatafAwxRu/0oK/79VlbSz7Q9aiSZUvyWYIYsd+qj+o24G5ZU2zJz src=https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.js></script><script crossorigin defer integrity=sha384-kWPLUVMOks5AQFrykwIup5lo0m3iMkkHrD0uJ4H5cjeGihAutqP0yW0J6dpFiVkI onload=renderMathInElement(document.body); src=https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/contrib/auto-render.min.js></script><script>function initMermaid(){var a={startOnLoad:true,theme:"neutral",flowchart:{useMaxWidth:true,htmlLabels:true}};mermaid.initialize(a);window.mermaid.init(undefined,document.querySelectorAll('.mermaid'))}</script><script async onload=initMermaid() src=https://cdn.jsdelivr.net/npm/mermaid@latest/dist/mermaid.min.js></script><body class="blog single"><div class="header-bar fixed-top"></div><header class="navbar fixed-top navbar-expand-md navbar-light"><div class=container><input class="menu-btn order-0" id=menu-btn type=checkbox><label class="menu-icon d-md-none" for=menu-btn><span class=navicon></span></label><a class="navbar-brand order-1 order-md-0 me-auto" href=https://wendajiang.github.io>「靡不有初，鲜克有终」</a><button aria-label="Toggle mode" class="btn btn-link order-2 order-md-4" id=mode type=button><span class=toggle-dark><svg class="feather feather-moon" viewbox="0 0 24 24" fill=none height=20 stroke=currentColor stroke-linecap=round stroke-linejoin=round stroke-width=2 width=20 xmlns=http://www.w3.org/2000/svg><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path></svg></span> <span class=toggle-light><svg class="feather feather-sun" viewbox="0 0 24 24" fill=none height=20 stroke=currentColor stroke-linecap=round stroke-linejoin=round stroke-width=2 width=20 xmlns=http://www.w3.org/2000/svg><circle cx=12 cy=12 r=5></circle><line x1=12 x2=12 y1=1 y2=3></line><line x1=12 x2=12 y1=21 y2=23></line><line x1=4.22 x2=5.64 y1=4.22 y2=5.64></line><line x1=18.36 x2=19.78 y1=18.36 y2=19.78></line><line x1=1 x2=3 y1=12 y2=12></line><line x1=21 x2=23 y1=12 y2=12></line><line x1=4.22 x2=5.64 y1=19.78 y2=18.36></line><line x1=18.36 x2=19.78 y1=5.64 y2=4.22></line></svg></span></button><ul class="navbar-nav fork-me order-3 order-md-5"><li class=nav-item><a class=nav-link href=https://github.com/wendajiang><svg class="feather feather-github" viewbox="0 0 24 24" fill=none height=20 stroke=currentColor stroke-linecap=round stroke-linejoin=round stroke-width=2 width=20 xmlns=http://www.w3.org/2000/svg><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path></svg><span class="ms-2 visually-hidden">GitHub</span></a></ul><div class="collapse navbar-collapse order-4 order-md-1"><ul class="navbar-nav main-nav me-auto order-5 order-md-2"><li class=nav-item><a class=nav-link href=https://wendajiang.github.io/books/effective-modern-cpp/>Books</a><li class=nav-item><a class=nav-link href=https://wendajiang.github.io/turtle/>Turtle</a><li class=nav-item><a class=nav-link href=https://wendajiang.github.io/essay/>Essay</a><li class=nav-item><a class=nav-link href=https://wendajiang.github.io/QA/>Q&A</a><li class=nav-item><a class=nav-link href=https://wendajiang.github.io/tags>Tags</a><li class=nav-item><a class=nav-link href=https://wendajiang.github.io/archive>Archive</a></ul><div class="break order-6 d-md-none"></div></div></div></header><div class="wrap container" role=document><div class=content><div class="row justify-content-center"><nav aria-label="Secondary navigation" class="books-toc d-none d-xl-block col-xl-3"><div class=page-links><h3>On this page</h3><nav id=TableOfContents><ul><li><a href=https://wendajiang.github.io/thinking-async/#the-investigating-process-record>the investigating process record</a><li><a href=https://wendajiang.github.io/thinking-async/#the-sender-receiver-understand>The Sender/Receiver understand</a><li><a href=https://wendajiang.github.io/thinking-async/#the-asio-design-philosophy-from-p2444>The ASIO design philosophy (from P2444)</a><li><a href=https://wendajiang.github.io/thinking-async/#references>references</a><li><a href=https://wendajiang.github.io/thinking-async/#extra-reference>extra reference</a></ul></nav></div></nav><div class="col-md-12 col-lg-10 col-xxl-8"><article><div class=blog-header><h1>thinking async</h1><p><small>Posted 2023-07-19 15:22:51 ‐ <strong>3 min read</strong></small><p><div class=category-area>「 <a href=https://wendajiang.github.io/tags/async> <div class=category>async</div> </a><a href=https://wendajiang.github.io/tags/cpp> <div class=category>cpp</div> </a> 」</div></div><p>This blog is only my clutter thinking about async(ASIO / SR model comparison) and record the resouces that I readed.<h1 id=the-investigating-process-record><a aria-label="Anchor link for: the-investigating-process-record" class=zola-anchor href=#the-investigating-process-record>the investigating process record</a></h1><p>First, I only use asio as my networking library, and then I find the <a href=https://think-async.com/Asio/>think-async</a> and the video in it. So I know asio also is the asynchrounous modle at the first time, and I begin to investigate the async model in c++ standard committee. Then refer to the reference, I figure out the NetTS(aka. ASIO) has been the experimental standard at the 2014, but not layering as the P2300 Sender/Receiver model proposed. I want to know the detail and query some materials that is the references.<h1 id=the-sender-receiver-understand><a aria-label="Anchor link for: the-sender-receiver-understand" class=zola-anchor href=#the-sender-receiver-understand>The Sender/Receiver understand</a></h1><p>At the beginning, I do not understand what is the sender/recevier, instinctly it seems the goroutine concept, one channel that has sender and receiver. And I learn the <a href="https://www.youtube.com/watch?v=h-ExnuD6jms">video</a> from Eric Niebler[The Range library author]. It explain <code>std::future and std::promise pair</code> limitation, and create the <code>lazyfuture/lazypromise</code> concept to break through. The LazyFuture and LazyPromise rename to Sender and Receiver. IMP, the Sender is send the value that program need, and Receiver receive the value from producer. So connecting them can connect the producer and consumer.<p>The important idea is lazy. Lazy cause the compiler can construct the task graph at compile time and optimize the compute process.<h1 id=the-asio-design-philosophy-from-p2444><a aria-label="Anchor link for: the-asio-design-philosophy-from-p2444" class=zola-anchor href=#the-asio-design-philosophy-from-p2444>The ASIO design philosophy (from P2444)</a></h1><ul><li>Be flexible in supporting composition mechanisms, since the appropriate choice depends on the specific use case<li>Aim to support as many of the semantic and syntactic properties of synchronous operations as possible, since they enable simpler composition and abstraction<li>Application code should be largely shilded from the complexify of threads and synchronisation, due to the complexiry of handling events from different sources.</ul><p>PS. eager execution matters for performance<h1 id=references><a aria-label="Anchor link for: references" class=zola-anchor href=#references>references</a></h1><ul><li><a href=https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2023/p2300r7.html#design-implementer>std::execution</a><li><a href=https://isocpp.org/files/papers/P2444R0.pdf>asio async model</a><li>https://www.reddit.com/r/cpp/comments/q6tgod/c_committee_polling_results_for_asynchronous/<li><a href=https://github.com/NVIDIA/stdexec>stdexec github repo</a> <ul><li><a href="https://www.youtube.com/watch?v=h-ExnuD6jms">eric niebler slides and presentation</a><li><a href="https://www.youtube.com/watch?v=xiaqNvqRB2E">eric niebler live codeing</a><li><a href=https://accu.org/journals/overload/29/165/teodorescu/>executors: A change of perspective</a></ul><li><a href=https://isocpp.org/files/papers/P2471R1>NetTS, ASIO and Sender Library Design Comparison</a><li><a href=https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2021/p2464r0.html>Ruminations on networking and executors</a><li><a href=https://github.com/cplusplus/papers/issues/1114>Response to P2464: The Networking TS is baked, P2300 Sender/Receiver is not</a> <ul><li>https://isocpp.org/files/papers/P2469R0.pdf</ul></ul><h1 id=extra-reference><a aria-label="Anchor link for: extra-reference" class=zola-anchor href=#extra-reference>extra reference</a></h1><ul><li><a href=https://github.com/cplusplus/papers/issues/1447>Sender/Receiver Interface For Networking</a> <ul><li><a href=https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2023/p2762r0.pdf>only an education presentation</a></ul><li><a href=https://github.com/David-Haim/concurrencpp>concurrencpp git repo</a> <ul><li>when_any<li>when_all</ul></ul></article></div></div></div><div id=gitalk-container></div><link href=https://unpkg.com/gitalk/dist/gitalk.css rel=stylesheet><script src=https://unpkg.com/gitalk/dist/gitalk.min.js></script><script>var gitalk=new Gitalk({id:'thinking async',clientID:'a17500877ddbb2dd70b9',clientSecret:'77e1c5816e97e2473c0a617bd0e3ece99f33559f',repo:'wendajiang.github.io',owner:'wendajiang',admin:['wendajiang'],perPage:50});gitalk.render('gitalk-container')</script></div><script defer src=https://wendajiang.github.io/js/main.js></script><script defer src=https://wendajiang.github.io/plugins/elasticlunr.min.js></script><script defer src=https://wendajiang.github.io/search_index.en.js></script><script defer src=https://wendajiang.github.io/js/search.js></script>